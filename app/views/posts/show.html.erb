<div class="post">
  <h1><%= @post.title %></h1>
  <p>Posted by <em><%= @post.user.username %></em> on <%= @post.created_at %></p>

  <div class="icons">
    <div class="upvotes">
      <%= @post.cached_weighted_score %>
    </div>
    <% if @post.categories.present? %>
      <% @post.categories.each do |cat| %>
        <%= link_to category_path(cat) do %>
          <div class="category">
            <%= cat.name %>
          </div>
        <% end %>
      <% end %>
    <% end %>
  </div>

  <% if @post.photos.attached? %>
    <%= render 'shared/carousel' %>
  <% end %>
  <br>


  <div class="contact-details">
    <% if @post.phone_number.present? %>
      <%= phone_to @post.phone_number, 'Call', class: "btn btn-cta-primary" %>
    <% end %>
    <% if @post.email.present? %>
      <%= mail_to @post.email, 'Mail', class: "btn btn-cta-secondary" %>
    <% end %>
    <% if @post.website.present? %>
      <%= link_to 'Website', @post.website, class: "btn btn-cta-secondary" %>
    <% end %>
  </div>

  <div class="description">
    <span> <%= @post.rich_content %></span>
  </div>

  <br>

  <!-- Map showing addresses of post -->
  <% if @post.addresses.present? %>
    <%= render 'shared/map' %>
  <% end %>

  <br>
  <!-- Save / Unsave this post to dashboard -->
  <% if user_signed_in? %>
    <% if current_user.favorited?(@post) %>
      <%= button_to "Delete bookmark", unsave_post_post_path, form_class: "unsave-btn" %>
    <% else %>
      <%= button_to "Bookmark post", save_post_post_path, form_class: "save-btn" %>
    <% end %>
  <% end %>

  <br>
  <!-- Vote functionality -->
<% if user_signed_in? %>
  
<% end %>
</div>

<!-- Admin actions -->
<% if user_signed_in? %>
  <% if current_user.role == 1 %>
    <!-- Publish post -->
    <!-- Delete post -->
  <% end %>
<% end %>
